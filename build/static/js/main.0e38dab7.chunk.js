(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{136:function(e,t,a){},161:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(43),o=a.n(r),s=(a(136),a(10)),l=a(204),i=a(229),j=a(231),d=a(233),b=a(219),u=a(234),h=a(224),x=a(225),O=a(236),g=a(237),m=a(238),f=a(217),p=a(212),v=a(213),w=a(18),C=a.n(w),S=a(14),y=a(2),k=Object(f.a)({root:{background:"#f4f4f4",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center"}});var I=function(){var e=Object(S.f)(),t=Object(n.useState)(!1),a=Object(s.a)(t,2),c=a[0],r=a[1],o=Object(n.useState)(""),f=Object(s.a)(o,2),w=f[0],I=f[1],N=Object(n.useState)(""),B=Object(s.a)(N,2),L=B[0],T=B[1],A=Object(n.useState)(null),M=Object(s.a)(A,2),U=M[0],_=M[1],D=Object(n.useState)(null),P=Object(s.a)(D,2),q=P[0],E=P[1],Y=k();return Object(y.jsx)("div",{className:Y.root,children:Object(y.jsx)(l.a,{sx:{width:400},children:Object(y.jsxs)(i.a,{children:[Object(y.jsx)(j.a,{title:"Login"}),Object(y.jsxs)(d.a,{children:[Object(y.jsxs)(l.a,{sx:{ml:6},children:[Object(y.jsx)(b.a,{variant:"outlined",label:"Username",sx:{width:257},onChange:function(e){return T(e.target.value)}})," ",Object(y.jsx)("br",{}),Object(y.jsx)("div",{children:U&&Object(y.jsx)("small",{children:U})}),Object(y.jsxs)(u.a,{sx:{mt:2},variant:"outlined",children:[Object(y.jsx)(h.a,{htmlFor:"outlined-adornment-password",children:"Password"}),Object(y.jsx)(x.a,{id:"outlined-adornment-password",type:c?"text":"password",value:w,onChange:function(e){return I(e.target.value)},endAdornment:Object(y.jsx)(O.a,{position:"end",children:Object(y.jsx)(g.a,{"aria-label":"toggle password visibility",onClick:function(){return r((function(e){return!e}))},edge:"end",children:c?Object(y.jsx)(p.a,{}):Object(y.jsx)(v.a,{})})}),label:"Password"}),Object(y.jsx)("div",{children:q&&Object(y.jsx)("small",{children:q})})]})]}),Object(y.jsx)(l.a,{sx:{mt:3,ml:17},children:Object(y.jsx)(m.a,{variant:"contained",sx:{width:90},color:"tertiary",onClick:function(){C.a.defaults.withCredentials=!0,C.a.post("/login",{username:L,password:w}).then((function(t){t.data.errors?(t.data.errors.username?_(t.data.errors.username):_(null),t.data.errors.password?E(t.data.errors.password):E(null)):(localStorage.setItem("token",t.data.token),localStorage.setItem("user",t.data.username),e("/blogs"))})).catch((function(e){return console.log(e)}))},children:"Login"})})]})]})})})},N=Object(f.a)({root:{background:"#f4f4f4",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center"}});var B=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(""),o=Object(s.a)(r,2),f=o[0],w=o[1],k=Object(n.useState)(""),I=Object(s.a)(k,2),B=I[0],L=I[1],T=Object(n.useState)(null),A=Object(s.a)(T,2),M=A[0],U=A[1],_=Object(n.useState)(null),D=Object(s.a)(_,2),P=D[0],q=D[1],E=Object(S.f)(),Y=N();return Object(y.jsx)("div",{className:Y.root,children:Object(y.jsx)(l.a,{sx:{width:400},children:Object(y.jsxs)(i.a,{children:[Object(y.jsx)(j.a,{title:"SignUp"}),Object(y.jsxs)(d.a,{children:[Object(y.jsxs)(l.a,{sx:{ml:6},children:[Object(y.jsx)(b.a,{variant:"outlined",label:"Username",sx:{width:257},onChange:function(e){return L(e.target.value)}})," ",Object(y.jsx)("br",{}),Object(y.jsx)("div",{children:M&&Object(y.jsx)("small",{children:M})}),Object(y.jsxs)(u.a,{sx:{mt:2},variant:"outlined",children:[Object(y.jsx)(h.a,{htmlFor:"outlined-adornment-password",children:"Password"}),Object(y.jsx)(x.a,{color:"primary",id:"outlined-adornment-password",type:a?"text":"password",value:f,onChange:function(e){return w(e.target.value)},endAdornment:Object(y.jsx)(O.a,{position:"end",children:Object(y.jsx)(g.a,{"aria-label":"toggle password visibility",onClick:function(){return c((function(e){return!e}))},edge:"end",children:a?Object(y.jsx)(p.a,{}):Object(y.jsx)(v.a,{})})}),label:"Password"}),Object(y.jsx)("div",{children:P&&Object(y.jsx)("small",{children:P})})]})]}),Object(y.jsx)(l.a,{sx:{mt:3,ml:17},children:Object(y.jsx)(m.a,{variant:"contained",onClick:function(){C.a.defaults.withCredentials=!0,C.a.post("/signup",{username:B,password:f}).then((function(e){e.data.errors?(e.data.errors.username?U(e.data.errors.username):U(null),e.data.errors.password?q(e.data.errors.password):q(null)):(localStorage.setItem("token",e.data.token),localStorage.setItem("user",e.data.username),E("/blogs"))})).catch((function(e){return console.log(e)}))},children:"SignUp"})})]})]})})})},L=a(53),T=a(89),A=a(228),M=a(216),U=a(232),_=a(214),D=Object(f.a)({warning:{marginTop:60,backgroundColor:"#f4f4f4",height:"100vh"},inputfields:{display:"flex",flexDirection:"column",width:400,marginTop:20}});var P=function(){var e=D(),t=Object(n.useState)(localStorage.getItem("user")),a=Object(s.a)(t,2),c=a[0],r=a[1],o=Object(n.useState)(""),l=Object(s.a)(o,2),u=l[0],h=l[1],x=Object(n.useState)(""),O=Object(s.a)(x,2),g=O[0],f=O[1],p=Object(n.useState)(!1),v=Object(s.a)(p,2),w=v[0],S=v[1];return localStorage.getItem("token")?Object(y.jsx)("div",{className:e.root,children:Object(y.jsxs)(_.a,{sx:{mt:10,mx:"20vw"},children:[Object(y.jsxs)("form",{children:[Object(y.jsx)(U.a,{variant:"h4",children:"Create a new Blog!"}),Object(y.jsxs)("div",{className:e.inputfields,children:[Object(y.jsx)(b.a,{disabled:!0,label:"Author's Name",required:!0,onChange:function(e){return r(e.target.value)},value:localStorage.getItem("user")}),Object(y.jsx)("br",{}),Object(y.jsx)(b.a,{label:"Title",required:!0,onChange:function(e){return h(e.target.value)}})," ",Object(y.jsx)("br",{}),Object(y.jsx)(b.a,{label:"Blog",variant:"outlined",required:!0,multiline:!0,onChange:function(e){return f(e.target.value)},rows:4})]}),Object(y.jsx)(_.a,{sx:{ml:18,mt:4},children:Object(y.jsx)(m.a,{variant:"contained",color:"primary",onClick:function(){var e=localStorage.getItem("token");C.a.defaults.withCreadentials=!0,C.a.post("/blogs/create",{author:c,title:u,blog:g},{headers:{"x-auth-token":"".concat(e),"Content-type":"application/json"}}).then((function(e){e.data.res&&(S(!0),setTimeout((function(){S(!1)}),[3e3]))})).catch((function(e){return console.log(e)}))},children:"Create"})})]}),Object(y.jsx)("div",{children:w&&Object(y.jsx)("h5",{children:"Blog Saved!"})})]})}):Object(y.jsx)("div",{className:e.warning,children:Object(y.jsxs)(i.a,{sx:{width:300,mx:"auto"},children:[Object(y.jsx)(j.a,{title:"You are not logged in"}),Object(y.jsx)(d.a,{children:Object(y.jsx)(U.a,{variant:"body2",color:"textSecondary",sx:{mx:5},children:"Log in to create a new Blog"})})]})})},q=a(239),E=a(116),Y=a(220),F=a(226),J=a(218),W=a(215),z=a(113),G=a.n(z),H=a(112),K=a.n(H),Q={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4};var R=function(e){var t=e.blog,a=e.handleDelete,c=e.updateBlogs,r=localStorage.getItem("user"),o=Object(n.useState)(!1),l=Object(s.a)(o,2),u=l[0],h=l[1],x=Object(n.useState)(""),O=Object(s.a)(x,2),f=O[0],p=O[1],v=Object(n.useState)(""),w=Object(s.a)(v,2),S=w[0],k=w[1],I=function(){return h(!1)};return Object(y.jsxs)("div",{children:[Object(y.jsx)(Y.a,{open:u,onClose:I,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:Object(y.jsxs)(_.a,{sx:Q,children:[Object(y.jsx)(U.a,{variant:"h6",component:"h2",children:"Edit"}),Object(y.jsx)(b.a,{label:"Title",sx:{mt:1,width:400},value:f,onChange:function(e){return p(e.target.value)}}),Object(y.jsx)(b.a,{label:"Blog",sx:{mt:1,width:400},multiline:!0,rows:4,value:S,onChange:function(e){return k(e.target.value)}})," ",Object(y.jsx)("br",{}),Object(y.jsx)(m.a,{sx:{mt:1,ml:20},variant:"contained",onClick:function(){return function(e){var t=localStorage.getItem("token");C.a.defaults.withCredentials=!0,C.a.post("/blogs/edit/"+e,{title:f,blog:S},{headers:{"x-auth-token":"".concat(t),"Content-type":"application/json"}}).then((function(e){C.a.get("/blogs",{headers:{"x-auth-token":"".concat(t),"Content-type":"application/json"}}).then((function(e){return c(e.data.blogs)})).catch((function(e){return console.log(e)}))})).catch((function(e){return console.log(e)})),I()}(t._id)},children:"Done"})]})}),Object(y.jsxs)(i.a,{children:[Object(y.jsx)(j.a,{avatar:Object(y.jsx)(F.a,{children:t.author[0].toUpperCase()}),action:Object(y.jsx)(_.a,{children:r===t.author?Object(y.jsxs)("div",{children:[Object(y.jsx)(g.a,{onClick:function(){return function(e,t){p(e),k(t),h(!0)}(t.title,t.blog)},children:Object(y.jsx)(K.a,{sx:{color:"info.main"}})}),Object(y.jsx)(g.a,{onClick:function(){return a(t._id)},children:Object(y.jsx)(G.a,{sx:{color:"warning.main"}})})]}):null}),title:t.title,subheader:t.author}),Object(y.jsxs)(d.a,{children:[Object(y.jsx)(U.a,{variant:"body2",color:"textSecondary",children:"Created On : "+Object(J.a)(Object(W.a)(t.updatedAt),"do MMMM Y")}),Object(y.jsx)(U.a,{children:t.blog})]})]})]})},V=Object(f.a)((function(e){return{root:{marginTop:60,backgroundColor:"#f4f4f4"},warning:{marginTop:60,backgroundColor:"#f4f4f4",height:"100vh"}}}));var X=function(){var e=V(),t=Object(n.useState)([]),a=Object(s.a)(t,2),c=a[0],r=a[1],o=Object(n.useState)(!0),l=Object(s.a)(o,2),b=l[0],u=l[1];Object(n.useEffect)((function(){u(!0);var e=localStorage.getItem("token");e&&(C.a.defaults.withCredentials=!0,C.a.get("/blogs",{headers:{"x-auth-token":"".concat(e),"Content-type":"application/json"}}).then((function(e){r(e.data.blogs),u(!1)})).catch((function(e){return console.logl(e)})))}),[]);var h=function(e){var t=localStorage.getItem("token");C.a.defaults.withCredentials=!0,C.a.delete("/blogs/delete/"+e,{headers:{"x-auth-token":"".concat(t),"Content-type":"application/json"}}).then((function(t){var a=c.filter((function(t){return t._id!==e}));r(a)})).catch((function(e){return console.log(e)}))},x=function(e){r(e)};return b?localStorage.getItem("user")?Object(y.jsx)("div",{className:e.warning,children:Object(y.jsx)("h3",{children:"Loading Blogs..."})}):Object(y.jsx)("div",{className:e.warning,children:Object(y.jsxs)(i.a,{sx:{width:300,mx:"auto"},children:[Object(y.jsx)(j.a,{title:"You are not logged in"}),Object(y.jsx)(d.a,{children:Object(y.jsx)(U.a,{variant:"body2",color:"textSecondary",sx:{mx:8},children:"Log in to view Blogs"})})]})}):Object(y.jsx)("div",{className:e.root,children:Object(y.jsx)(q.a,{children:Object(y.jsx)(E.a,{breakpointCols:{default:3,1100:2,900:1},className:"my-masonry-grid",columnClassName:"my-masonry-grid_column",children:c.map((function(e){return Object(y.jsx)("div",{children:Object(y.jsx)(R,{blog:e,handleDelete:h,updateBlogs:x})},e._id)}))})})})},Z=a(240),$=a(241),ee=a(227),te=a(235),ae=a(222),ne=a(242),ce=a(243),re=a(115),oe=a.n(re),se=a(114),le=a.n(se),ie=Object(f.a)((function(e){return{root:{background:"#f4f4f4"},drawer:{width:240},layout:{marginLeft:240},active:{background:"#f4f4f4"},toolbar:e.mixins.toolbar,appbar:{display:"flex",justifyContent:"center"}}})),je=[{name:"Blogs",icon:Object(y.jsx)(le.a,{color:"tertiary"}),path:"/blogs"},{name:"Create",icon:Object(y.jsx)(oe.a,{color:"primary"}),path:"/create"}];var de=function(e){var t=e.children,a=ie(),n=Object(S.f)(),c=Object(S.e)(),r=localStorage.getItem("user");return Object(y.jsxs)("div",{children:[Object(y.jsx)(Z.a,{className:a.appbar,sx:{width:"calc(100% - ".concat(240,"px)")},elevation:1,children:Object(y.jsxs)($.a,{children:[Object(y.jsx)(U.a,{variant:"h6",children:"Welcome"}),r&&Object(y.jsx)(U.a,{variant:"h6",sx:{ml:1},children:r}),r&&Object(y.jsx)(m.a,{sx:{ml:"auto"},variant:"contained",color:"secondary",onClick:function(){localStorage.removeItem("user"),localStorage.removeItem("token"),n("/")},children:"Logout"}),!r&&"/login"!==c.pathname&&Object(y.jsx)(m.a,{variant:"contained",sx:{width:88,ml:"auto"},color:"tertiary",onClick:function(){return n("/login")},children:"Login"}),!r&&"/login"===c.pathname&&Object(y.jsx)(m.a,{variant:"contained",sx:{width:88,ml:"auto"},color:"secondary",href:"/",children:"Signup"})]})}),Object(y.jsx)("div",{children:Object(y.jsxs)(ee.a,{variant:"permanent",className:a.drawer,anchor:"left",classes:{paper:a.drawer},children:[Object(y.jsx)(U.a,{variant:"h5",sx:{mx:"auto",mt:1},children:"Blog Site"}),Object(y.jsx)(te.a,{children:je.map((function(e){return Object(y.jsxs)(ae.a,{className:c.pathname==="".concat(e.path)?a.active:null,button:!0,onClick:function(){return n(e.path)},children:[Object(y.jsx)(ne.a,{children:e.icon}),Object(y.jsx)(ce.a,{primary:e.name})]},e.name)}))})]})}),Object(y.jsx)("div",{className:a.layout,children:t})]})},be=Object(T.a)({palette:{tertiary:{main:M.a[500]}}});var ue=function(){return Object(y.jsx)(L.a,{children:Object(y.jsx)(A.a,{theme:be,children:Object(y.jsx)("div",{className:"App",children:Object(y.jsx)(de,{children:Object(y.jsxs)(S.c,{children:[Object(y.jsx)(S.a,{path:"/",element:Object(y.jsx)(B,{})}),Object(y.jsx)(S.a,{path:"/login",element:Object(y.jsx)(I,{})}),Object(y.jsx)(S.a,{path:"/create",element:Object(y.jsx)(P,{})}),Object(y.jsx)(S.a,{path:"/blogs",element:Object(y.jsx)(X,{})})]})})})})})};o.a.render(Object(y.jsx)(c.a.StrictMode,{children:Object(y.jsx)(ue,{})}),document.getElementById("root"))}},[[161,1,2]]]);
//# sourceMappingURL=main.0e38dab7.chunk.js.map